{"version":3,"sources":["idb.js"],"names":["idb_name","objectStoreName","version","allRestKey","resturantReviewsPrefix","restaurantSingReviewPrefix","syncObjectStoreName","syncCreateNewRestaurantReviewCount","syncFavoriteRestaurantCount","syncUnfavoriteRestaurantCount","syncUpdateRestaurantReviewCount","syncDeleteRestaurantReviewCount","syncOperationIndex","getIDBObject","indexedDB","window","mozIndexedDB","webkitIndexedDB","msIndexedDB","shimIndexedDB","open","onupgradeneeded","db","result","store","createObjectStore","allResturnats","callback","onsuccess","tx","transaction","objectStore","data","get","oncomplete","close","event","target","resturantByID","id","resturantReviews","count","k","addAllResturants","restJson","put","addResturant","addResturantReviews","restReviewsJson","key","addToSyncListReviews","category","syncData","getAllPendingReviews","resturantID","openCursor","cursor","rev","value","restaurant_id","continue","iterateSyncIDB","info","cursKey","removeFromSyncIDB","delete","removeResturantReviews","resId","req","console","log","onerror","error","evt","errorCode"],"mappings":";;AAAA,IAAMA,WAAW,wBAAjB;AACA,IAAMC,kBAAmB,aAAzB;AACA,IAAMC,UAAU,CAAhB;;AAEA,IAAMC,aAAa,eAAnB;AACA,IAAMC,yBAAyB,oBAA/B;AACA,IAAMC,6BAA6B,SAAnC;;AAEA,IAAMC,sBAAsB,cAA5B;AACA,IAAIC,qCAAqC,CAAzC;AACA,IAAIC,8BAA8B,KAAlC;AACA,IAAIC,gCAAgC,KAApC;AACA,IAAIC,kCAAkC,KAAtC;AACA,IAAIC,kCAAkC,KAAtC;AACA,IAAIC,qBAAqB,CAAzB;;AAGA,IAAIC,eAAc,SAAdA,YAAc,GAAM;AACvB,KAAIC,YAAYC,OAAOD,SAAP,IAAoBC,OAAOC,YAA3B,IAA2CD,OAAOE,eAAlD,IAAqEF,OAAOG,WAA5E,IAA2FH,OAAOI,aAAlH;AACA,KAAIC,OAAON,UAAUM,IAAV,CAAepB,QAAf,EAAyBE,OAAzB,CAAX;AACAkB,MAAKC,eAAL,GAAuB,YAAW;AACjC,MAAIC,KAAKF,KAAKG,MAAd;AACA,MAAIC,QAAQF,GAAGG,iBAAH,CAAqBxB,eAArB,CAAZ;AACA,MAAIuB,QAAQF,GAAGG,iBAAH,CAAqBnB,mBAArB,CAAZ;AACA,EAJD;AAKA,QAAOc,IAAP;AACA,CATD;;AAWA,IAAIM,gBAAgB,SAAhBA,aAAgB,CAACC,QAAD,EAAc;;AAEjC,KAAIP,OAAOP,cAAX;;AAEAO,MAAKQ,SAAL,GAAiB,YAAI;AACpB,MAAIN,KAAKF,KAAKG,MAAd;AACG,MAAIM,KAAKP,GAAGQ,WAAH,CAAe7B,eAAf,CAAT;AACA,MAAIuB,QAAQK,GAAGE,WAAH,CAAe9B,eAAf,CAAZ;AACA,MAAI+B,OAAOR,MAAMS,GAAN,CAAU9B,UAAV,CAAX;AACA0B,KAAGK,UAAH,GAAgB,YAAW;AACvBZ,MAAGa,KAAH;AACH,GAFD;AAGAH,OAAKJ,SAAL,GAAgB,UAACQ,KAAD,EAAS;AACxBT,YAAS,IAAT,EAAeS,MAAMC,MAAN,CAAad,MAA5B;AACA,GAFD;AAGA;AACA;AACH,EAbD;AAeA,CAnBD;;AAsBA,SAASe,aAAT,CAAuBC,EAAvB,EAA2BZ,QAA3B,EAAoC;AACnC,KAAIP,OAAOP,cAAX;;AAEAO,MAAKQ,SAAL,GAAiB,YAAI;AACpB,MAAIN,KAAKF,KAAKG,MAAd;AACG,MAAIM,KAAKP,GAAGQ,WAAH,CAAe7B,eAAf,CAAT;AACA,MAAIuB,QAAQK,GAAGE,WAAH,CAAe9B,eAAf,CAAZ;AACA,MAAI+B,OAAOR,MAAMS,GAAN,CAAUM,EAAV,CAAX;AACA;AACAP,OAAKJ,SAAL,GAAgB,UAACQ,KAAD,EAAS;AACxBT,YAAS,IAAT,EAAeS,MAAMC,MAAN,CAAad,MAA5B;AACA,GAFD;AAGAM,KAAGK,UAAH,GAAgB,YAAW;AACvBZ,MAAGa,KAAH;AACH,GAFD;AAGH,EAZD;AAaA;;AAED,SAASK,gBAAT,CAA0BD,EAA1B,EAA8BZ,QAA9B,EAAiD;AAAA,KAATc,KAAS,uEAAH,CAAC,CAAE;;AAChD,KAAIrB,OAAOP,cAAX;;AAEAO,MAAKQ,SAAL,GAAiB,YAAI;AACpB,MAAIN,KAAKF,KAAKG,MAAd;AACG,MAAIM,KAAKP,GAAGQ,WAAH,CAAe7B,eAAf,CAAT;AACA,MAAIuB,QAAQK,GAAGE,WAAH,CAAe9B,eAAf,CAAZ;AACA,MAAIyC,IAAItC,yBAAyBmC,EAAjC;AACA,MAAGG,MAAM,CAAT,EAAW;AACVA,OAAIrC,6BAA6BkC,EAAjC;AACA;AACD,MAAIP,OAAOR,MAAMS,GAAN,CAAUS,CAAV,CAAX;AACAV,OAAKJ,SAAL,GAAgB,UAACQ,KAAD,EAAS;AACxBT,YAAS,IAAT,EAAeS,MAAMC,MAAN,CAAad,MAA5B;AACA,GAFD;AAGAM,KAAGK,UAAH,GAAgB,YAAW;AACvBZ,MAAGa,KAAH;AACH,GAFD;AAGH,EAfD;AAgBA;;AAED,IAAIQ,mBAAmB,SAAnBA,gBAAmB,CAACC,QAAD,EAAc;AACpC,KAAIxB,OAAOP,cAAX;AACAO,MAAKQ,SAAL,GAAiB,YAAI;AACpB,MAAIN,KAAKF,KAAKG,MAAd;AACA,MAAIM,KAAKP,GAAGQ,WAAH,CAAe7B,eAAf,EAAgC,WAAhC,CAAT;AACA,MAAIuB,QAAQK,GAAGE,WAAH,CAAe9B,eAAf,CAAZ;AACAuB,QAAMqB,GAAN,CAAUD,QAAV,EAAoBzC,UAApB;AACA0B,KAAGK,UAAH,GAAgB,YAAW;AACpBZ,MAAGa,KAAH;AACH,GAFJ;AAGG;AACH,EATD;AAUA,CAZD;;AAeA,IAAIW,eAAe,SAAfA,YAAe,CAACP,EAAD,EAAKK,QAAL,EAAiB;AACnC,KAAIxB,OAAOP,cAAX;AACAO,MAAKQ,SAAL,GAAiB,YAAI;AACpB,MAAIN,KAAKF,KAAKG,MAAd;AACA,MAAIM,KAAKP,GAAGQ,WAAH,CAAe7B,eAAf,EAAgC,WAAhC,CAAT;AACA,MAAIuB,QAAQK,GAAGE,WAAH,CAAe9B,eAAf,CAAZ;AACAuB,QAAMqB,GAAN,CAAUD,QAAV,EAAoBL,EAApB;AACAV,KAAGK,UAAH,GAAgB,YAAW;AACpBZ,MAAGa,KAAH;AACH,GAFJ;AAGA,EARD;AASA,CAXD;;AAaA,IAAIY,sBAAsB,SAAtBA,mBAAsB,CAACR,EAAD,EAAKS,eAAL,EAAkC;AAAA,KAAZP,KAAY,uEAAN,CAAC,CAAK;;AAC3D,KAAIrB,OAAOP,cAAX;AACAO,MAAKQ,SAAL,GAAiB,YAAI;AACpB,MAAIN,KAAKF,KAAKG,MAAd;AACA,MAAIM,KAAKP,GAAGQ,WAAH,CAAe7B,eAAf,EAAgC,WAAhC,CAAT;AACA,MAAIuB,QAAQK,GAAGE,WAAH,CAAe9B,eAAf,CAAZ;AACA,MAAIgD,MAAM7C,yBAAuBmC,EAAjC;AACA,MAAGE,UAAU,CAAb,EAAe;AACdQ,SAAM5C,6BAA6BkC,EAAnC;AACA;AACDf,QAAMqB,GAAN,CAAUG,eAAV,EAA2BC,GAA3B;AACApB,KAAGK,UAAH,GAAgB,YAAW;AACpBZ,MAAGa,KAAH;AACH,GAFJ;AAGA,EAZD;AAaA,CAfD;;AAkBA,IAAIe,uBAAuB,SAAvBA,oBAAuB,CAAClB,IAAD,EAAOmB,QAAP,EAAkB;AAC5C,KAAI/B,OAAOP,cAAX;AACAO,MAAKQ,SAAL,GAAiB,YAAI;AACpB,MAAIN,KAAKF,KAAKG,MAAd;AACA,MAAIM,KAAKP,GAAGQ,WAAH,CAAexB,mBAAf,EAAoC,WAApC,CAAT;AACA,MAAIkB,QAAQK,GAAGE,WAAH,CAAezB,mBAAf,CAAZ;AACA,MAAI8C,WAAW,EAAC,QAAQpB,IAAT,EAAe,YAAY,CAAC,CAA5B,EAAf;AACA,MAAGmB,aAAa,WAAhB,EAA4B;AAC3BC,YAASD,QAAT,GAAoB5C,kCAApB;AACA;AACA;AACA,GAJD,MAIM,IAAG4C,aAAa,cAAhB,EAA+B;AACpCC,YAASD,QAAT,GAAoBxC,+BAApB;;AAEA;AACA;AACA,GALK,MAKA,IAAGwC,aAAa,cAAhB,EAA+B;AACpCC,YAASD,QAAT,GAAoBzC,+BAApB;AACA;AACA;AACA,GAJK,MAIA,IAAGyC,aAAa,UAAhB,EAA2B;AAChCC,YAASD,QAAT,GAAoB3C,2BAApB;AACA;AACA;AACA,GAJK,MAIA,IAAG2C,aAAa,YAAhB,EAA6B;AAClCC,YAASD,QAAT,GAAoB1C,6BAApB;AACA;AACA;AACA;AACDe,QAAMqB,GAAN,CAAUO,QAAV,EAAoBxC,kBAApB;AACAA;;AAEAiB,KAAGK,UAAH,GAAgB,YAAW;AACpBZ,MAAGa,KAAH;AACH,GAFJ;AAGA,EAjCD;AAkCA,CApCD;;AAuCA,IAAIkB,uBAAuB,SAAvBA,oBAAuB,CAACC,WAAD,EAAc3B,QAAd,EAAyB;AACnD,KAAIP,OAAOP,cAAX;AACAO,MAAKQ,SAAL,GAAiB,YAAI;AACpB,MAAIN,KAAKF,KAAKG,MAAd;AACA,MAAIM,KAAKP,GAAGQ,WAAH,CAAexB,mBAAf,EAAoC,WAApC,CAAT;AACA,MAAIkB,QAAQK,GAAGE,WAAH,CAAezB,mBAAf,CAAZ;AACAkB,QAAM+B,UAAN,GAAmB3B,SAAnB,GAA+B,UAASQ,KAAT,EAAgB;AAC5C,OAAIoB,SAASpB,MAAMC,MAAN,CAAad,MAA1B;AACA,OAAIiC,MAAJ,EAAY;AACV,QAAIC,MAAMD,OAAOE,KAAP,CAAa1B,IAAvB;AACA,QAAGyB,IAAIE,aAAJ,KAAsBL,WAAtB,IAAqCE,OAAOE,KAAP,CAAaP,QAAb,GAAwB3C,2BAAhE,EAA4F;AAC3FmB,cAAS8B,GAAT;AACA;AACDD,WAAOI,QAAP;AACD;AACD,GATH;AAUA,EAdD;AAeA,CAjBD;;AAmBA,IAAIC,iBAAiB,SAAjBA,cAAiB,CAAClC,QAAD,EAAY;AAChC,KAAIP,OAAOP,cAAX;AACAO,MAAKQ,SAAL,GAAiB,YAAI;AACpB,MAAIN,KAAKF,KAAKG,MAAd;AACA,MAAIM,KAAKP,GAAGQ,WAAH,CAAexB,mBAAf,CAAT;AACA,MAAIkB,QAAQK,GAAGE,WAAH,CAAezB,mBAAf,CAAZ;;AAEAkB,QAAM+B,UAAN,GAAmB3B,SAAnB,GAA+B,UAASQ,KAAT,EAAgB;AAC9C,OAAIoB,SAASpB,MAAMC,MAAN,CAAad,MAA1B;AACA,OAAIiC,MAAJ,EAAY;AACT,QAAMM,OAAON,OAAOE,KAAP,CAAa1B,IAA1B;AACA,QAAMmB,WAAWK,OAAOE,KAAP,CAAaP,QAA9B;AACA,QAAMY,UAAUP,OAAOP,GAAvB;;AAEAtB,aAASoC,OAAT,EAAkBD,IAAlB,EAAwBX,QAAxB;;AAEAK,WAAOI,QAAP;AACF;AACD,GAXD;AAYA,EAjBD;AAkBA,CApBD;;AAsBA,IAAII,oBAAoB,SAApBA,iBAAoB,CAACzB,EAAD,EAAM;AAC7B,KAAInB,OAAOP,cAAX;AACAO,MAAKQ,SAAL,GAAiB,YAAI;AACpB,MAAIN,KAAKF,KAAKG,MAAd;AACA,MAAIM,KAAKP,GAAGQ,WAAH,CAAexB,mBAAf,EAAoC,WAApC,CAAT;AACA,MAAIkB,QAAQK,GAAGE,WAAH,CAAezB,mBAAf,CAAZ;AACAkB,QAAMyC,MAAN,CAAa1B,EAAb;AACAV,KAAGK,UAAH,GAAgB,YAAW;AACpBZ,MAAGa,KAAH;AACH,GAFJ;AAGA,EARD;AASA,CAXD;;AAaA,IAAI+B,yBAAyB,SAAzBA,sBAAyB,CAACC,KAAD,EAAS;AACrC,KAAI/C,OAAOP,cAAX;AACAO,MAAKQ,SAAL,GAAiB,YAAI;AACpB,MAAIN,KAAKF,KAAKG,MAAd;AACA,MAAIM,KAAKP,GAAGQ,WAAH,CAAe7B,eAAf,EAAgC,WAAhC,CAAT;AACA,MAAIuB,QAAQK,GAAGE,WAAH,CAAe9B,eAAf,CAAZ;AACA,MAAImE,MAAM5C,MAAMyC,MAAN,CAAa7D,yBAAyB+D,KAAtC,CAAV;;AAEAC,MAAIxC,SAAJ,GAAgB,UAACQ,KAAD,EAAS;AACxBiC,WAAQC,GAAR,CAAY,eAAeH,KAAf,GAAuB,0CAAnC;AACA,GAFD;;AAIAC,MAAIG,OAAJ,GAAc,UAACnC,KAAD,EAAS;AACtBiC,WAAQG,KAAR,CAAe,uCAAf,EAAyDC,IAAIpC,MAAJ,CAAWqC,SAApE;AACA,GAFD;AAGA7C,KAAGK,UAAH,GAAgB,YAAW;AACpBZ,MAAGa,KAAH;AACH,GAFJ;AAGA;AACA,EAjBD;AAkBA,CApBD","file":"idb.js","sourcesContent":["const idb_name = 'mws-restaurant-stage-1';\r\nconst objectStoreName =  'Restaurants';\r\nconst version = 1;\r\n\r\nconst allRestKey = 'allResturnats';\r\nconst resturantReviewsPrefix = 'ReviewsRestuarant_';\r\nconst restaurantSingReviewPrefix = 'Review_';\r\n\r\nconst syncObjectStoreName = 'syncRequests';\r\nvar syncCreateNewRestaurantReviewCount = 0;\r\nvar syncFavoriteRestaurantCount = 10000;\r\nvar syncUnfavoriteRestaurantCount = 20000;\r\nvar syncUpdateRestaurantReviewCount = 30000;\r\nvar syncDeleteRestaurantReviewCount = 40000;\r\nvar syncOperationIndex = 0;\r\n\r\n\r\nvar getIDBObject =() => {\r\n\tvar indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB || window.shimIndexedDB;\r\n\tvar open = indexedDB.open(idb_name, version);\r\n\topen.onupgradeneeded = function() {\r\n\t\tvar db = open.result;\r\n\t\tvar store = db.createObjectStore(objectStoreName);\r\n\t\tvar store = db.createObjectStore(syncObjectStoreName);\r\n\t};\r\n\treturn open;\r\n}\r\n\r\nvar allResturnats = (callback) => {\r\n\t\r\n\tlet open = getIDBObject();\r\n\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n    \tvar tx = db.transaction(objectStoreName);\r\n    \tvar store = tx.objectStore(objectStoreName);\r\n    \tvar data = store.get(allRestKey);\r\n    \ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n\t    data.onsuccess =(event)=>{\r\n    \t\tcallback(null ,event.target.result);\r\n    \t}\r\n\t    // callback(null, data);\r\n    \t// return data;\r\n\t};\r\n\r\n}\r\n\r\n\r\nfunction resturantByID(id, callback){\r\n\tlet open = getIDBObject();\r\n\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n    \tvar tx = db.transaction(objectStoreName);\r\n    \tvar store = tx.objectStore(objectStoreName);\r\n    \tvar data = store.get(id);\r\n    \t// callback(null, data);\r\n    \tdata.onsuccess =(event)=>{\r\n    \t\tcallback(null ,event.target.result);\r\n    \t}\r\n    \ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n\t};\r\n}\r\n\r\nfunction resturantReviews(id, callback, count=-1){\r\n\tlet open = getIDBObject();\r\n\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n    \tvar tx = db.transaction(objectStoreName);\r\n    \tvar store = tx.objectStore(objectStoreName);\r\n    \tlet k = resturantReviewsPrefix + id;\r\n    \tif(k === 1){\r\n    \t\tk = restaurantSingReviewPrefix + id;\r\n    \t}\r\n    \tvar data = store.get(k);\r\n    \tdata.onsuccess =(event)=>{\r\n    \t\tcallback(null ,event.target.result);\r\n    \t}\r\n    \ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n\t};\r\n}\r\n\r\nvar addAllResturants = (restJson) => {\r\n\tlet open = getIDBObject();\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n\t\tvar tx = db.transaction(objectStoreName, 'readwrite');\r\n\t\tvar store = tx.objectStore(objectStoreName);\r\n\t\tstore.put(restJson, allRestKey);\r\n\t\ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n\t    return;\r\n\t}\r\n}\r\n\r\n\r\nvar addResturant = (id, restJson) =>{\r\n\tlet open = getIDBObject();\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n\t\tvar tx = db.transaction(objectStoreName, 'readwrite');\r\n\t\tvar store = tx.objectStore(objectStoreName);\r\n\t\tstore.put(restJson, id);\r\n\t\ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n\t}\r\n}\r\n\r\nvar addResturantReviews = (id, restReviewsJson, count=-1) =>{\r\n\tlet open = getIDBObject();\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n\t\tvar tx = db.transaction(objectStoreName, 'readwrite');\r\n\t\tvar store = tx.objectStore(objectStoreName);\r\n\t\tlet key = resturantReviewsPrefix+id;\r\n\t\tif(count === 1){\r\n\t\t\tkey = restaurantSingReviewPrefix + id;\r\n\t\t}\r\n\t\tstore.put(restReviewsJson, key);\r\n\t\ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n\t}\r\n}\r\n\r\n\r\nvar addToSyncListReviews = (data, category)=>{\r\n\tlet open = getIDBObject();\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n\t\tvar tx = db.transaction(syncObjectStoreName, 'readwrite');\r\n\t\tvar store = tx.objectStore(syncObjectStoreName);\r\n\t\tlet syncData = {'data': data, 'category': -1};\r\n\t\tif(category === 'NewReview'){\r\n\t\t\tsyncData.category = syncCreateNewRestaurantReviewCount;\r\n\t\t\t// store.put(data, syncCreateNewRestaurantReviewCount);\r\n\t\t\t// syncCreateNewRestaurantReviewCount++;\r\n\t\t}else if(category === 'DeleteReview'){\r\n\t\t\tsyncData.category = syncDeleteRestaurantReviewCount;\r\n\r\n\t\t\t// store.put(data, syncDeleteRestaurantReviewCount);\r\n\t\t\t// syncDeleteRestaurantReviewCount++;\r\n\t\t}else if(category === 'UpdateReview'){\r\n\t\t\tsyncData.category = syncUpdateRestaurantReviewCount;\r\n\t\t\t// store.put(data, syncUpdateRestaurantReviewCount);\r\n\t\t\t// syncUpdateRestaurantReviewCount++;\r\n\t\t}else if(category === 'Favorite'){\r\n\t\t\tsyncData.category = syncFavoriteRestaurantCount;\r\n\t\t\t// store.put(data, syncFavoriteRestaurantCount);\r\n\t\t\t// syncFavoriteRestaurantCount++;\r\n\t\t}else if(category === 'unFavorite'){\r\n\t\t\tsyncData.category = syncUnfavoriteRestaurantCount;\r\n\t\t\t// store.put(data, syncUnfavoriteRestaurantCount);\r\n\t\t\t// syncUnfavoriteRestaurantCount++;\r\n\t\t}\r\n\t\tstore.put(syncData, syncOperationIndex);\r\n\t\tsyncOperationIndex++;\r\n\r\n\t\ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n\t}\r\n}\r\n\r\n\r\nvar getAllPendingReviews = (resturantID, callback)=>{\r\n\tlet open = getIDBObject();\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n\t\tvar tx = db.transaction(syncObjectStoreName, 'readwrite');\r\n\t\tvar store = tx.objectStore(syncObjectStoreName);\r\n\t\tstore.openCursor().onsuccess = function(event) {\r\n  \t\t\tvar cursor = event.target.result;\r\n  \t\t\tif (cursor) {\r\n\t\t\t    let rev = cursor.value.data;\r\n\t\t\t    if(rev.restaurant_id === resturantID && cursor.value.category < syncFavoriteRestaurantCount){\r\n\t\t\t    \tcallback(rev);\r\n\t\t\t    }\r\n\t\t\t    cursor.continue();\r\n\t\t\t  }\r\n  \t\t}\r\n\t}\r\n}\r\n\r\nvar iterateSyncIDB = (callback)=>{\r\n\tvar open = getIDBObject();\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n\t\tvar tx = db.transaction(syncObjectStoreName);\r\n\t\tvar store = tx.objectStore(syncObjectStoreName);\r\n\r\n\t\tstore.openCursor().onsuccess = function(event) {\r\n\t\t\tvar cursor = event.target.result;\r\n\t\t\tif (cursor) {\r\n\t\t\t  \tconst info = cursor.value.data;\r\n\t\t\t  \tconst category = cursor.value.category;\r\n\t\t\t  \tconst cursKey = cursor.key;\r\n\r\n\t\t\t  \tcallback(cursKey, info, category);\r\n\r\n\t\t\t  \tcursor.continue();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar removeFromSyncIDB = (id)=>{\r\n\tvar open = getIDBObject();\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n\t\tvar tx = db.transaction(syncObjectStoreName, 'readwrite');\r\n\t\tvar store = tx.objectStore(syncObjectStoreName);\r\n\t\tstore.delete(id);\r\n\t\ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n\t}\r\n}\r\n\r\nvar removeResturantReviews = (resId)=>{\r\n\tlet open = getIDBObject();\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n\t\tvar tx = db.transaction(objectStoreName, 'readwrite');\r\n\t\tvar store = tx.objectStore(objectStoreName);\r\n\t\tlet req = store.delete(resturantReviewsPrefix + resId);\r\n\r\n\t\treq.onsuccess = (event)=>{\r\n\t\t\tconsole.log('resturant ' + resId + ' reviews removed successfully from IDB..');\r\n\t\t}\r\n\r\n\t\treq.onerror = (event)=>{\r\n\t\t\tconsole.error( 'ERROR during removeResturantReviews: ' , evt.target.errorCode);\r\n\t\t}\r\n\t\ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n\t\treturn;\r\n\t}\r\n}"]}