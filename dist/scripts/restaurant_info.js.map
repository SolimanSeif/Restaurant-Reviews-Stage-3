{"version":3,"sources":["restaurant_info.js"],"names":["restaurant","map","resturantID","restaurantReviewsList","CATEGORY_NEW_REVIEW","CATEGORY_DELETE_REVIEW","CATEGORY_UPDATE_REVIEW","originalModifiedReviewsInnerHTML","Map","notSubmittedReviews","EDIT_REVIEW_NAME_ID_PREFIX","EDIT_REVIEW_RATING_ID_PREFIX","EDIT_REVIEW_COMM_ID_PREFIX","EDIT_REVIEW_RADIO_NAME_PREF","SINGLE_REVIEW_DIV_PREFIX","NOT_SUBMITTED_REVIEW_DIV_PREFIX","document","addEventListener","event","target","readyState","console","log","fetchRestaurantFromURL","error","self","fillBreadcrumb","window","initMap","google","maps","getElementById","zoom","center","latlng","scrollwheel","DBHelper","mapMarkerForRestaurant","callback","id","getParameterByName","resturantByID","rest","fillRestaurantHTML","fetchRestaurantById","resturantReviews","reviews","fillReviewsHTML","undefined","getAllPendingReviews","afterSubmittingReviewFail","fetchRestaurantReviews","name","innerHTML","heartClass","is_favorite","favSpan","createElement","CONST_FAVORITIFY_ACTION_SPAN_ID_PREFIX","className","setAttribute","appendChild","address","picture","imgsList","imagesUrlForRestaurant","img1","media","srcset","img2","img","alt","cuisine_type","src","cuisine","operating_hours","fillRestaurantHoursHTML","operatingHours","hours","key","row","day","time","container","noReviews","ul","Worker","revWorker","postMessage","onmessage","message","content","data","forEach","review","createReviewHTML","li","createReviewHeaderSection","createEditAndDeleteButtons","createReviewCommentSection","div","date","createDate","Date","createdAt","toDateString","head","rating","getRatingClassName","editOnClickAction","deleteOnClickAction","bt1","btn2","comments","rate","rateName","breadcrumb","a","href","url","location","replace","regex","RegExp","results","exec","decodeURIComponent","getSubmittedReviewInfoAndValidation","nameID","rateID","commID","value","comm","rateList","getElementsByName","i","length","checked","alert","reviewInfo","now","submitUserReviewForm","jsonData","JSON","stringify","fetch","method","body","headers","then","response","json","catch","e","jsonObj","afterSubmittingReviewSuccess","syncObj","addToSyncListReviews","clearSubmittedReview","syncDB_key","isExists","newDiv","set","rev","parse","reviewerName","reviewerComment","deleteNotSubmittedReviewAction","mapKey","result","confirm","removeFromSyncIDB","delete","editNotSubmittedReviewAction","createEditReviewSection","deleteReviewAction","reviewID","successCallback","customNotification","failCallback","revid","obj","storedObject","afterDeletingReviewFailure","deleteReview","index","getReviewByID","revDiv","addResturantReviews","revDev","hd","p1","get","type","nmLbl","rateDiv1","generateRatingStars","commLbl","createEdititedReviewActionsButtons","save","cancel","rateDiv","revID","generateStar","val","txt","s1","l1","title","Number","parseInt","editExistingReview","cancelEditingReview","info","saveUpdatedReview","review_id","myRev","mydiv","updateRestaurantReview","newDBContent","stringObj","updateExistingSyncObject"],"mappings":"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","file":"restaurant_info.js","sourcesContent":["let restaurant;\r\nvar map;\r\nlet resturantID;\r\nlet restaurantReviewsList;\r\n\r\nconst CATEGORY_NEW_REVIEW = 'NewReview';\r\nconst CATEGORY_DELETE_REVIEW = 'DeleteReview';\r\nconst CATEGORY_UPDATE_REVIEW = 'UpdateReview';\r\n\r\nvar originalModifiedReviewsInnerHTML = new Map();\r\nvar notSubmittedReviews = new Map();\r\nconst EDIT_REVIEW_NAME_ID_PREFIX = 'edit_review_name_';\r\nconst EDIT_REVIEW_RATING_ID_PREFIX = 'edit_review_rating_';\r\nconst EDIT_REVIEW_COMM_ID_PREFIX = 'edit_review_comm_';\r\nconst EDIT_REVIEW_RADIO_NAME_PREF = '_rating_';\r\nconst SINGLE_REVIEW_DIV_PREFIX = 'review_';\r\n\r\nconst NOT_SUBMITTED_REVIEW_DIV_PREFIX= 'notSubmittedReviewDiv_';\r\n/**\r\n * Initialize Google map, called from HTML.\r\n */\r\n\r\ndocument.addEventListener('readystatechange', event => {\r\n  if (event.target.readyState === 'interactive') {\r\n    console.log('I am in interactive state....');\r\n  }\r\n  else if (event.target.readyState === 'complete') {\r\n    console.log('I am in complete state....');\r\n    \r\n    fetchRestaurantFromURL((error, restaurant) => {\r\n      if (error) { // Got an error!\r\n        console.error(error);\r\n      } else {\r\n        self.restaurant = restaurant;\r\n        fillBreadcrumb();\r\n      }\r\n    });\r\n  }\r\n});\r\n\r\n\r\nwindow.initMap = () => {\r\n  self.map = new google.maps.Map(document.getElementById('map'), {\r\n    zoom: 16,\r\n    center: restaurant.latlng,\r\n    scrollwheel: false\r\n  });\r\n  DBHelper.mapMarkerForRestaurant(self.restaurant, self.map);\r\n}\r\n\r\n/**\r\n * Get current restaurant from page URL.\r\n */\r\nvar fetchRestaurantFromURL = (callback) => {\r\n  if (self.restaurant) { // restaurant already fetched!\r\n    callback(null, self.restaurant)\r\n    return;\r\n  }\r\n  const id = getParameterByName('id');\r\n  self.resturantID = id;\r\n  if (!id) { // no id found in URL\r\n    error = 'No restaurant id in URL'\r\n    callback(error, null);\r\n  } else {\r\n    // from DB first\r\n    resturantByID(id,(error,rest)=>{\r\n      if(rest){\r\n        self.restaurant = rest;\r\n        fillRestaurantHTML();\r\n        callback(null, restaurant);\r\n      }else{\r\n        DBHelper.fetchRestaurantById(id, (error, restaurant) => {\r\n          self.restaurant = restaurant;\r\n          if (!restaurant) {\r\n            console.error(error);\r\n            return;\r\n          }\r\n          fillRestaurantHTML();\r\n          callback(null, restaurant);\r\n        });\r\n      }\r\n    });\r\n    \r\n\r\n    resturantReviews(id,(error, reviews)=>{\r\n      if(reviews){\r\n        self.reviews = reviews;\r\n        fillReviewsHTML(undefined, reviews);\r\n        getAllPendingReviews(id, afterSubmittingReviewFail);\r\n      }else{\r\n        DBHelper.fetchRestaurantReviews(id, fillReviewsHTML, afterSubmittingReviewFail);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Create restaurant HTML and add it to the webpage\r\n */\r\nvar fillRestaurantHTML = (restaurant = self.restaurant) => {\r\n  const name = document.getElementById('restaurant-name');\r\n  name.innerHTML = restaurant.name;\r\n\r\n  let heartClass = '&#xf08a;';\r\n  if(restaurant.is_favorite === true || restaurant.is_favorite === 'true'){\r\n    heartClass = '&#xf004;';\r\n  }\r\n  let favSpan = document.createElement('button');\r\n  favSpan.id = `${CONST_FAVORITIFY_ACTION_SPAN_ID_PREFIX}${restaurant.id}`;\r\n  favSpan.className = 'fa favoriteButton';\r\n  favSpan.innerHTML = heartClass;\r\n  favSpan.setAttribute('onclick',`markRestaurantAsFavorit(${restaurant.id}, ${restaurant.is_favorite}, -1)`);\r\n  favSpan.setAttribute('role', 'presentation');\r\n  favSpan.setAttribute('aria-label', 'Add to Favorite');\r\n  name.appendChild(favSpan);\r\n\r\n  const address = document.getElementById('restaurant-address');\r\n  address.innerHTML = restaurant.address;\r\n\r\n  // TODO picture from HTML and change the requirement from here.\r\n  const picture = document.getElementById('restaurant-img');\r\n  picture.className = 'restaurant-img';\r\n//  image.src = DBHelper.imageUrlForRestaurant(restaurant);\r\n  \r\n  \r\n\tlet imgsList = DBHelper.imagesUrlForRestaurant(restaurant);\r\n\tconst img1 = document.createElement('source');\r\n\timg1.media = '(min-width: 1500px)';\r\n\timg1.srcset = imgsList[0];\r\n\timg1.className = 'restaurant-img';\r\n\tpicture.appendChild(img1);\r\n\tconst img2 = document.createElement('source');\r\n\timg2.media = '(min-width: 800px)';\r\n\timg2.srcset = imgsList[1];\r\n\timg2.className = 'restaurant-img';\r\n\tpicture.appendChild(img2);\r\n\tconst img = document.createElement('img');\r\n\timg.alt = restaurant.name + ' restaurant , provide ' + restaurant.cuisine_type + ', Located in ' + restaurant.address;\r\n\timg.src = imgsList[2];\r\n\timg.className = 'restaurant-img';\r\n\tpicture.appendChild(img);\r\n  \r\n  \r\n  const cuisine = document.getElementById('restaurant-cuisine');\r\n  cuisine.innerHTML = restaurant.cuisine_type;\r\n\r\n  // fill operating hours\r\n  if (restaurant.operating_hours) {\r\n    fillRestaurantHoursHTML();\r\n  }\r\n  // // fill reviews\r\n  // fillReviewsHTML();\r\n}\r\n\r\n/**\r\n * Create restaurant operating hours HTML table and add it to the webpage.\r\n */\r\nvar fillRestaurantHoursHTML = (operatingHours = self.restaurant.operating_hours) => {\r\n  const hours = document.getElementById('restaurant-hours');\r\n  for (let key in operatingHours) {\r\n    const row = document.createElement('tr');\r\n\r\n    const day = document.createElement('td');\r\n    day.innerHTML = key;\r\n    row.appendChild(day);\r\n\r\n    const time = document.createElement('td');\r\n    time.innerHTML = operatingHours[key];\r\n    row.appendChild(time);\r\n\r\n    hours.appendChild(row);\r\n  }\r\n}\r\n\r\n/**\r\n * Create all reviews HTML and add them to the webpage.\r\n */\r\nvar fillReviewsHTML = (error ,reviews = self.restaurantReviewsList) => {\r\n  const container = document.getElementById('reviews-container');\r\n  // const title = document.createElement('h3');\r\n  // title.innerHTML = 'Reviews';\r\n  // container.appendChild(title);\r\n\r\n  if (error || !reviews) {\r\n    const noReviews = document.createElement('p');\r\n    noReviews.innerHTML = 'No reviews yet!';\r\n    container.appendChild(noReviews);\r\n    return;\r\n  }else{\r\n    self.restaurantReviewsList = reviews;\r\n    const ul = document.getElementById('reviews-list');\r\n     ul.innerHTML = '';\r\n    if(window.Worker){\r\n      let revWorker = new Worker('scripts/workers/restaurantReviewsPreparation.js');\r\n      revWorker.postMessage({'reviews': reviews});\r\n      revWorker.onmessage = (message)=>{\r\n        let content = message.data.ul;\r\n        ul.innerHTML = ul.innerHTML + content;\r\n      }\r\n    }else{\r\n\r\n      reviews.forEach(review => {\r\n        if(review){\r\n          ul.appendChild(createReviewHTML(review));\r\n        }\r\n      });\r\n      container.appendChild(ul);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Create review HTML and add it to the webpage.\r\n */\r\nvar createReviewHTML = (review, li = document.createElement('div')) => {\r\n  // const li = document.createElement('div');\r\n  li.id= `${SINGLE_REVIEW_DIV_PREFIX}${review.id}`;\r\n//   const name = document.createElement('p1');\r\n//   name.innerHTML = review.name;\r\n// //  li.appendChild(name);\r\n\r\n//   const date = document.createElement('p2');\r\n//   // date.innerHTML = review.date;\r\n// //  li.appendChild(date);\r\n//   let createDate = new Date(review.createdAt);\r\n//   date.innerHTML = createDate.toDateString();\r\n\r\n//   const head = document.createElement('h4');\r\n//   head.appendChild(name);\r\n//   head.appendChild(date);\r\n//   head.className = 'reviewHead';\r\n//   li.appendChild(head);\r\n  \r\n//   const rating = document.createElement('p3');\r\n//   rating.innerHTML = `Rating: ${review.rating}`; \r\n// \trating.className = 'reviewRate ' + getRatingClassName(review.rating);\r\n//   li.appendChild(rating);\r\n  createReviewHeaderSection(li, review);\r\n  createEditAndDeleteButtons(li, review, `editExistingReview(${review.id})`, `deleteReviewAction(${review.id})`);\r\n  createReviewCommentSection(li, review);\r\n  // const comments = document.createElement('p');\r\n  // comments.innerHTML = review.comments;\r\n  // li.appendChild(comments);\r\n\r\n  return li;\r\n}\r\n\r\nvar createReviewHeaderSection=(div, review)=>{\r\n  let name = document.createElement('p1');\r\n  name.innerHTML = review.name;\r\n\r\n  let date = document.createElement('p2');\r\n  let createDate = new Date(review.createdAt);\r\n  date.innerHTML = createDate.toDateString();\r\n\r\n  let head = document.createElement('h4');\r\n  head.appendChild(name);\r\n  head.appendChild(date);\r\n  head.className = 'reviewHead';\r\n  div.appendChild(head);\r\n  \r\n  let rating = document.createElement('p3');\r\n  rating.innerHTML = `Rating: ${review.rating}`; \r\n  rating.className = 'reviewRate ' + getRatingClassName(review.rating);\r\n  div.appendChild(rating);\r\n}\r\n\r\nvar createEditAndDeleteButtons=(div, review, editOnClickAction, deleteOnClickAction)=>{\r\n  let bt1 = document.createElement('button');\r\n  bt1.setAttribute('onclick', editOnClickAction);\r\n  bt1.innerHTML = '&#xf044; Edit';\r\n  bt1.className = 'fa reviewActionButton';\r\n  bt1.setAttribute('role', 'presentation');\r\n  bt1.setAttribute('aria-label', 'Edit Review');\r\n\r\n\r\n  let btn2 = document.createElement('button');\r\n  btn2.setAttribute('onclick', deleteOnClickAction);\r\n  // let spn2 = document.createElement('span');\r\n  // spn2.className = 'fontawesome-cut';\r\n  btn2.innerHTML = '&#xf00d; Delete';\r\n  btn2.className = 'fa reviewActionButton';\r\n  btn2.setAttribute('role', 'presentation');\r\n  btn2.setAttribute('aria-label', 'Delete Review');\r\n  // btn2.appendChild(spn2);\r\n\r\n  div.appendChild(btn2);\r\n  div.appendChild(bt1);\r\n}\r\n\r\nvar createReviewCommentSection = (div, review)=>{\r\n  let comments = document.createElement('p');\r\n  comments.innerHTML = review.comments;\r\n  div.appendChild(comments);\r\n}\r\n\r\nvar getRatingClassName = (rate) =>{\r\n\tlet rateName = 'unknownRate';\r\n\tif(rate == 0){\r\n\t\trateName = 'rate0';\r\n\t}else if(rate == 1){\r\n\t\trateName = 'rate1';\r\n\t}else if(rate == 2){\r\n\t\trateName = 'rate2';\r\n\t}else if(rate == 3){\r\n\t\trateName = 'rate3';\r\n\t}else if(rate == 4){\r\n\t\trateName = 'rate4';\r\n\t}else if(rate == 5){\r\n\t\trateName = 'rate5';\r\n\t}\r\n\treturn rateName;\r\n}\r\n\r\n/**\r\n * Add restaurant name to the breadcrumb navigation menu\r\n */\r\nvar fillBreadcrumb = (restaurant=self.restaurant) => {\r\n  const breadcrumb = document.getElementById('breadcrumbOL');\r\n  let a = document.createElement('a');\r\n  a.href = `./restaurant.html?id=${restaurant.id}`;\r\n  a.setAttribute('aria-current', 'page');\r\n  a.innerHTML = ` ${restaurant.name}`;\r\n  const li = document.createElement('li');\r\n  li.appendChild(a);\r\n  // li.innerHTML = restaurant.name;\r\n  breadcrumb.appendChild(li);\r\n}\r\n\r\n/**\r\n * Get a parameter by name from page URL.\r\n */\r\nvar getParameterByName = (name, url) => {\r\n  if (!url)\r\n    url = window.location.href;\r\n  name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n  const regex = new RegExp(`[?&]${name}(=([^&#]*)|&|#|$)`),\r\n    results = regex.exec(url);\r\n  if (!results)\r\n    return null;\r\n  if (!results[2])\r\n    return '';\r\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n}\r\n\r\nvar getSubmittedReviewInfoAndValidation =(nameID, rateID, commID)=>{\r\n  let name = document.getElementById(nameID).value;\r\n  let comm = document.getElementById(commID).value;\r\n  let rateList = document.getElementsByName(rateID);\r\n  let rate = 0;\r\n  for(let i = 0  ; i < rateList.length ;i++){\r\n    if(rateList[i].checked){\r\n      rate= rateList[i].value;\r\n      break;\r\n    }\r\n  }\r\n  if(rate === 0 || name === '' || name === undefined || comm === '' || comm === undefined){\r\n    alert('Missing Informations to submit your review...');\r\n    return undefined;\r\n  }else{\r\n    let reviewInfo = {'restaurant_id': self.resturantID, \r\n                    'name': name,\r\n                    'rating': rate,\r\n                    'comments': comm,\r\n                    'createdAt': Date.now()};\r\n    return reviewInfo;\r\n  }\r\n}\r\n\r\nvar submitUserReviewForm = ()=>{\r\n  console.log('executing submitUserReviewForm');\r\n  // let name = document.getElementById('reviewerName').value;\r\n  // let comm = document.getElementById('reviewerComment').value;\r\n  // let rateList = document.getElementsByName('rating');\r\n  // let rate = 0;\r\n  // for(let i = 0  ; i < rateList.length ;i++){\r\n  //   if(rateList[i].checked){\r\n  //     rate= rateList[i].value;\r\n  //     break;\r\n  //   }\r\n  // }\r\n\r\n  // if(rate === 0 || name === '' || name === undefined || comm === '' || comm === undefined){\r\n  //   alert('Missing Informations to submit your review...')\r\n  // }else{\r\n  //   let reviewInfo = {'restaurant_id': self.resturantID, \r\n  //                   'name': name,\r\n  //                   'rating': rate,\r\n  //                   'comments': comm,\r\n  //                   'createdAt': Date.now()};\r\n\r\n  let reviewInfo = getSubmittedReviewInfoAndValidation('reviewerName', 'rating', 'reviewerComment');\r\n  if(reviewInfo){\r\n    console.log(reviewInfo);\r\n    \r\n    let jsonData = JSON.stringify(reviewInfo);\r\n    fetch('http://localhost:1337/reviews/', {\r\n        method: 'POST', \r\n        body: jsonData,\r\n        headers: {\r\n          'content-type': 'application/json'\r\n        }\r\n      }\r\n      ).then((response)=>{\r\n        if(response){\r\n          return response.json();\r\n        }else{\r\n          return undefined;\r\n        }\r\n        \r\n      }).catch((e)=>{\r\n        console.log(e);\r\n      }).then((jsonObj)=>{\r\n        //TODO \r\n        // check its completed successfully or not\r\n        if(jsonObj){\r\n          console.log('sucess ......');\r\n          console.log(jsonObj);\r\n          // refetch and update DB\r\n          afterSubmittingReviewSuccess();\r\n        }else{\r\n          // error \r\n          let syncObj = addToSyncListReviews(jsonData, CATEGORY_NEW_REVIEW);\r\n          afterSubmittingReviewFail(syncObj.value, syncObj.key, false);\r\n          alert('Your review will be submitted when you go online or the review service running..');\r\n        }\r\n      });\r\n     clearSubmittedReview('reviewerName', 'rating', 'reviewerComment');\r\n  \r\n  }\r\n}\r\n\r\n\r\nvar afterSubmittingReviewSuccess = ()=>{\r\n  DBHelper.fetchRestaurantReviews(resturantID, (error, reviews) => {\r\n      if (!reviews) {\r\n        console.error(error);\r\n        return;\r\n      }\r\n      fillReviewsHTML(null ,reviews);\r\n  });\r\n}\r\n\r\nvar afterSubmittingReviewFail = (review, syncDB_key, isExists= false)=>{\r\n    let newDiv ;\r\n  if(!isExists){\r\n    notSubmittedReviews.set(syncDB_key, review);\r\n    newDiv = document.createElement('div');\r\n    newDiv.id = `${SINGLE_REVIEW_DIV_PREFIX}${syncDB_key}`;\r\n  }else{\r\n    newDiv = document.getElementById(`${SINGLE_REVIEW_DIV_PREFIX}${syncDB_key}`);\r\n    newDiv.innerHTML = '';\r\n  }\r\n  \r\n  let rev = JSON.parse(review.data);\r\n  createReviewHeaderSection(newDiv, rev);\r\n  createEditAndDeleteButtons(newDiv, rev, `editNotSubmittedReviewAction('${syncDB_key}')`, `deleteNotSubmittedReviewAction('${syncDB_key}')`);\r\n  createReviewCommentSection(newDiv, rev);\r\n\r\n  if(!isExists){\r\n    const ul = document.getElementById('reviews-list');\r\n    ul.appendChild(newDiv);\r\n  }\r\n}\r\n\r\nvar clearSubmittedReview = (reviewerName, rating, reviewerComment)=>{\r\n  document.getElementById(reviewerName).value = '';\r\n  document.getElementById(reviewerComment).value = '';\r\n  let rateList = document.getElementsByName(rating);\r\n\r\n  for(let i = 0  ; i < rateList.length ;i++){\r\n    if(rateList[i].checked){\r\n      rateList[i].checked = false;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nvar deleteNotSubmittedReviewAction= (mapKey)=>{\r\n  let result = window.confirm('Your didnt submitted yet, Confirm to delete it');\r\n  if(result){\r\n    removeFromSyncIDB(mapKey);\r\n    notSubmittedReviews.delete(mapKey);\r\n    document.getElementById(`${SINGLE_REVIEW_DIV_PREFIX}${mapKey}`).innerHTML = '';\r\n  }\r\n}\r\n\r\nvar editNotSubmittedReviewAction= (mapKey)=>{\r\n  // TODO\r\n  createEditReviewSection(mapKey);\r\n}\r\n\r\n\r\nvar deleteReviewAction=(reviewID)=>{\r\n  let result = window.confirm('Confirm to delete');\r\n  if(result){\r\n    console.log('Start deleting action id:' + reviewID);\r\n    let successCallback = ()=>{\r\n      DBHelper.fetchRestaurantReviews(self.resturantID,  \r\n        fillReviewsHTML, undefined);\r\n      customNotification('Review Deleted successfully');\r\n    }\r\n\r\n    let failCallback = (revid)=>{\r\n      let obj = {'id': revid, 'restaurant_id': self.resturantID};\r\n      let storedObject = JSON.stringify(obj);\r\n      addToSyncListReviews(storedObject, CATEGORY_DELETE_REVIEW);\r\n      afterDeletingReviewFailure(revid);\r\n    }\r\n    deleteReview(reviewID, successCallback, failCallback);\r\n  }\r\n}\r\n\r\nvar afterDeletingReviewFailure=(reviewID)=>{\r\n  let index = getReviewByID(reviewID);\r\n  if(index && index < restaurantReviewsList.length){\r\n    restaurantReviewsList[index] = undefined;\r\n  }\r\n\r\n  let revDiv = document.getElementById(`${SINGLE_REVIEW_DIV_PREFIX}${reviewID}`);\r\n  revDiv.innerHTML = '';\r\n  addResturantReviews(resturantID,restaurantReviewsList);\r\n}\r\n\r\n\r\nvar getReviewByID = (id)=>{\r\n  for(let index = 0 ; index < restaurantReviewsList.length ; index++){\r\n    if(restaurantReviewsList[index] && restaurantReviewsList[index].id === id){\r\n      return index;\r\n    }\r\n  }\r\n  return undefined;\r\n}\r\n\r\nvar createEditReviewSection = (reviewID)=>{\r\n  let revDev = document.getElementById(`${SINGLE_REVIEW_DIV_PREFIX}${reviewID}`);\r\n  originalModifiedReviewsInnerHTML.set(reviewID, revDev.innerHTML);\r\n  revDev.innerHTML = '';\r\n  revDev.className = 'editReviews';\r\n  revDev.setAttribute('role', 'form');\r\n  revDev.setAttribute('aria-labelledby','editReviewLabel');\r\n\r\n  \r\n  let hd = document.createElement('h4');\r\n  let p1 = document.createElement('p1');\r\n  p1.innerHTML = 'Edit Review:';\r\n  hd.appendChild(p1);\r\n  hd.className = 'reviewHead';\r\n\r\n  revDev.appendChild(hd);\r\n\r\n  let index = getReviewByID(reviewID);\r\n  let review;\r\n  if(index){\r\n    review = restaurantReviewsList[index];\r\n  }else{\r\n    review = JSON.parse(notSubmittedReviews.get(reviewID).data);\r\n  }\r\n\r\n  let name = document.createElement('input');\r\n  name.type = 'text';\r\n  name.value = review.name;\r\n  name.id = `${EDIT_REVIEW_NAME_ID_PREFIX}${reviewID}`;\r\n  name.setAttribute('maxlength', 50);\r\n  let nmLbl = document.createElement('label');\r\n  nmLbl.innerHTML = 'Reviewer Name: ';\r\n  nmLbl.setAttribute('for',name.id);\r\n  revDev.appendChild(nmLbl);\r\n  revDev.appendChild(name);\r\n\r\n  let rateDiv1 = document.createElement('div');\r\n  rateDiv1.className = 'modifyReviewRating';\r\n  rateDiv1.id = `${EDIT_REVIEW_RATING_ID_PREFIX}${reviewID}`;\r\n  rateDiv1.setAttribute('name', rateDiv1.id);\r\n  generateRatingStars(rateDiv1, review.rating, reviewID);\r\n  revDev.appendChild(rateDiv1);\r\n\r\n  let comm = document.createElement('textarea');\r\n  comm.id = `${EDIT_REVIEW_COMM_ID_PREFIX}${reviewID}`;\r\n  comm.value =review.comments;\r\n  comm.setAttribute('maxlength', 1000);\r\n  let commLbl = document.createElement('label');\r\n  commLbl.className = 'reviewerCommentLabel';\r\n  commLbl.setAttribute('for',comm.id);\r\n  commLbl.innerHTML = 'Edit The Review Comment here';\r\n\r\n  revDev.appendChild(commLbl);\r\n  revDev.appendChild(comm);\r\n\r\n  // let actionDev = document.createElement('div');\r\n  // actionDev.className = 'reviewActionsDiv';\r\n  // let save = document.createElement('button');\r\n  // save.setAttribute('onclick', `saveUpdatedReview({'reviewID': ${reviewID}, 'index':${index}})`);\r\n  // let sp1 = document.createElement('span');\r\n  // sp1.className = 'fontawesome-save';\r\n  // sp1.innerHTML = 'Save';\r\n  // save.appendChild(sp1);\r\n  // let cancel = document.createElement('button');\r\n  // cancel.setAttribute('onclick', `cancelEditingReview({'reviewID': ${reviewID}, 'index':${index}})`);\r\n  // let sp2 = document.createElement('span');\r\n  // sp2.className = 'fontawesome-remove-sign';\r\n  // sp2.innerHTML = 'Exit';\r\n  // cancel.appendChild(sp2);\r\n\r\n  // actionDev.appendChild(save);\r\n  // actionDev.appendChild(cancel);\r\n\r\n  // revDev.appendChild(actionDev);\r\n  createEdititedReviewActionsButtons(revDev, reviewID, index);\r\n}\r\n\r\nvar createEdititedReviewActionsButtons=(div, reviewID, index)=>{\r\n  \r\n  let save = document.createElement('button');\r\n  if(index){\r\n    save.setAttribute('onclick', `saveUpdatedReview({'reviewID': ${reviewID}, 'index':${index}})`);\r\n  }else{\r\n    save.setAttribute('onclick', `saveUpdatedReview({'reviewID': '${reviewID}', 'index':${index}})`);\r\n  }\r\n  \r\n  // let sp1 = document.createElement('span');\r\n  // sp1.className = 'fontawesome-save';\r\n  save.innerHTML = '&#xf1d8; Save';\r\n  save.className = 'fa editReviewActionButton';\r\n  save.setAttribute('role', 'presentation');\r\n  save.setAttribute('aria-label', 'Save Modified Review');\r\n  // save.appendChild(sp1);\r\n\r\n  let cancel = document.createElement('button');\r\n  if(index){\r\n    cancel.setAttribute('onclick', `cancelEditingReview({'reviewID': ${reviewID}, 'index':${index}})`);\r\n  }else{\r\n    cancel.setAttribute('onclick', `cancelEditingReview({'reviewID': '${reviewID}', 'index':${index}})`);\r\n  }\r\n  \r\n  // let sp2 = document.createElement('span');\r\n  // sp2.className = 'fontawesome-remove-sign';\r\n  cancel.innerHTML = '&#xf05c; Exit';\r\n  cancel.className = 'fa editReviewActionButton';\r\n  cancel.setAttribute('role', 'presentation');\r\n  cancel.setAttribute('aria-label', 'Discard Review modifications');\r\n  // cancel.appendChild(sp2);\r\n\r\n  div.appendChild(save);\r\n  div.appendChild(cancel);\r\n\r\n}\r\n\r\nvar generateRatingStars = (rateDiv, rating, revID) =>{\r\n  generateStar(rateDiv, 1, 'Sucks big time', revID, rating);\r\n  generateStar(rateDiv, 2, 'Kinda bad', revID, rating);\r\n  generateStar(rateDiv, 3, 'Meh', revID, rating);\r\n  generateStar(rateDiv, 4, 'Pretty good', revID, rating);\r\n  generateStar(rateDiv, 5, 'Awesome', revID, rating);\r\n  \r\n}\r\n\r\nvar generateStar = (div,val, txt, revID, rating)=>{\r\n  let s1 = document.createElement('input');\r\n  s1.type = 'radio';\r\n  s1.id = `_star${val}`;\r\n  s1.name = `${EDIT_REVIEW_RADIO_NAME_PREF}${revID}`;\r\n  s1.value = val;\r\n  \r\n  let l1 = document.createElement('label');\r\n  // l1.className = 'full';\r\n  l1.setAttribute('for',s1.id);\r\n  l1.title = `${txt} - ${val} stars`;\r\n  l1.innerHTML = `${val} &#9734;`;\r\n\r\n  if(Number.parseInt(rating, 10) === val){\r\n    s1.setAttribute('checked', true);\r\n  }\r\n\r\n  div.appendChild(s1);\r\n  div.appendChild(l1);\r\n}\r\n\r\nvar editExistingReview= (reviewID)=>{\r\n  createEditReviewSection(reviewID);\r\n}\r\n\r\nvar cancelEditingReview=(info)=>{\r\n  let result = window.confirm('Discard Changes ?');\r\n  if(result){\r\n    let reviewID = info.reviewID;\r\n    let index = info.index;\r\n    let revDev = document.getElementById(`review_${reviewID}`);\r\n    revDev.innerHTML = originalModifiedReviewsInnerHTML.get(reviewID);\r\n    originalModifiedReviewsInnerHTML.delete(reviewID);\r\n  }\r\n}\r\n\r\nvar saveUpdatedReview= (info)=>{\r\n  let reviewID = info.reviewID;\r\n  let index = info.index;\r\n  let reviewInfo = getSubmittedReviewInfoAndValidation(`${EDIT_REVIEW_NAME_ID_PREFIX}${reviewID}`, \r\n    `${EDIT_REVIEW_RADIO_NAME_PREF}${reviewID}`, `${EDIT_REVIEW_COMM_ID_PREFIX}${reviewID}`);\r\n  \r\n  if(reviewInfo){\r\n    let result = window.confirm('Confirm to apply the changes?');\r\n    if(result){\r\n      console.log('Start updating the review: ' + reviewID + 'with below info');\r\n      console.log(reviewInfo);\r\n      reviewInfo.review_id = reviewID;\r\n      if(index){ // normal review update\r\n        let jsonData = JSON.stringify(reviewInfo);\r\n\r\n        let failCallback = (response)=>{\r\n          let myRev = restaurantReviewsList[index];\r\n\r\n          myRev.name = reviewInfo.name;\r\n          myRev.comments = reviewInfo.comments;\r\n          myRev.rating = reviewInfo.rating;\r\n\r\n          addToSyncListReviews(jsonData,CATEGORY_UPDATE_REVIEW);\r\n          addResturantReviews(resturantID,restaurantReviewsList);\r\n\r\n          let mydiv = document.getElementById(`${SINGLE_REVIEW_DIV_PREFIX}${reviewID}`);\r\n          mydiv.innerHTML = '';\r\n          createReviewHTML(myRev, mydiv);\r\n        }\r\n\r\n        updateRestaurantReview(jsonData,afterSubmittingReviewSuccess, failCallback);\r\n\r\n        originalModifiedReviewsInnerHTML.delete(reviewID);\r\n      }else{\r\n        // not submitted review.\r\n        // TODO\r\n        let newDBContent = notSubmittedReviews.get(reviewID);\r\n        let stringObj = JSON.stringify(reviewInfo)\r\n        newDBContent.data = stringObj;\r\n        updateExistingSyncObject(reviewID, newDBContent);\r\n\r\n        // let mydiv = document.getElementById(`${SINGLE_REVIEW_DIV_PREFIX}${reviewID}`);\r\n        // mydiv.innerHTML = '';\r\n        afterSubmittingReviewFail(newDBContent, reviewID, true);\r\n\r\n        originalModifiedReviewsInnerHTML.delete(reviewID);\r\n      }\r\n      \r\n    }\r\n  }\r\n}\r\n"]}