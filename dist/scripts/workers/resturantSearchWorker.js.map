{"version":3,"sources":["workers/resturantSearchWorker.js"],"names":["self","importScripts","onmessage","message","restaurants","data","cuisine","neighborhood","filter","r","cuisine_type","postMessage","resturantsHTML","forEach","generateRestaurantHTML","restaurant","imgsList","DBHelper","imagesUrlForRestaurant","picture","img1","img2","alt","name","address","img","more","urlForRestaurant","li"],"mappings":";;AACAA,KAAKC,aAAL,CAAmB,gBAAnB;;AAEAD,KAAKE,SAAL,GAAiB,UAACC,OAAD,EAAW;AAC3B,MAAIC,cAAcD,QAAQE,IAAR,CAAaD,WAA/B;AACA,MAAIE,UAAUH,QAAQE,IAAR,CAAaC,OAA3B;AACC,MAAIC,eAAeJ,QAAQE,IAAR,CAAaE,YAAhC;;AAED,MAAID,WAAW,KAAf,EAAsB;AAAE;AACrBF,kBAAcA,YAAYI,MAAZ,CAAmB;AAAA,aAAKC,EAAEC,YAAF,IAAkBJ,OAAvB;AAAA,KAAnB,CAAd;AACD;AACD,MAAIC,gBAAgB,KAApB,EAA2B;AAAE;AAC3BH,kBAAcA,YAAYI,MAAZ,CAAmB;AAAA,aAAKC,EAAEF,YAAF,IAAkBA,YAAvB;AAAA,KAAnB,CAAd;AACD;;AAEDI,cAAY,EAAC,MAAM,CAAP,EAAU,eAAeP,WAAzB,EAAZ;;AAEA,MAAIQ,iBAAiB,EAArB;AACAR,cAAYS,OAAZ,CAAoB,sBAAc;AAChCD,qBAAiBA,iBAAiBE,uBAAuBC,UAAvB,CAAlC;AACD,GAFD;AAGAJ,cAAY,EAAC,MAAM,CAAP,EAAU,kBAAkBC,cAA5B,EAAZ;AACD,CAnBD;;AAsBA,IAAIE,yBAAyB,SAAzBA,sBAAyB,CAACC,UAAD,EAAgB;;AAG3C,MAAIC,WAAWC,SAASC,sBAAT,CAAgCH,UAAhC,CAAf;;AAEA,MAAII,UAAU,iCAAd;AACA;AACA;AACA,MAAIC,+EAA6EJ,SAAS,CAAT,CAA7E,OAAJ;AACA,MAAIK,8EAA4EL,SAAS,CAAT,CAA5E,OAAJ;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA,MAAIM,MAAMP,WAAWQ,IAAX,GAAkB,wBAAlB,GAA6CR,WAAWL,YAAxD,GAAuE,eAAvE,GAAyFK,WAAWS,OAA9G;AACA,MAAIC,qBAAmBH,GAAnB,oBAAqCN,SAAS,CAAT,CAArC,+BAAJ;;AAEA;AACA;AACAG,YAAUA,UAAUC,IAAV,GAAiBC,IAAjB,GAAwBI,GAAxB,GAA8B,YAAxC;;AAGA,MAAMF,gBAAcR,WAAWQ,IAAzB,UAAN;AACA;AACA;;AAEA,MAAIhB,uBAAqBQ,WAAWR,YAAhC,SAAJ;AACA;AACA;;AAEA,MAAMiB,kBAAgBT,WAAWS,OAA3B,SAAN;AACA;AACA;;AAEA,MAAME,mCAAiCT,SAASU,gBAAT,CAA0BZ,UAA1B,CAAjC,uBAAN;AACA;AACA;AACA;AACA;;AAEA,MAAIa,KAAK,UAAUT,OAAV,GAAoBI,IAApB,GAA0BhB,YAA1B,GAAyCiB,OAAzC,GAAmDE,IAAnD,GAA0D,QAAnE;;AAEA,SAAOE,EAAP;AACD,CAnDD","file":"resturantSearchWorker.js","sourcesContent":["\r\nself.importScripts('../dbhelper.js');\r\n\r\nself.onmessage = (message)=>{\r\n\tlet restaurants = message.data.restaurants;\r\n\tlet cuisine = message.data.cuisine;\r\n  let neighborhood = message.data.neighborhood;\r\n\r\n\tif (cuisine != 'all') { // filter by cuisine\r\n    restaurants = restaurants.filter(r => r.cuisine_type == cuisine);\r\n  }\r\n  if (neighborhood != 'all') { // filter by neighborhood\r\n    restaurants = restaurants.filter(r => r.neighborhood == neighborhood);\r\n  }\r\n\r\n  postMessage({'id': 1, 'restaurants': restaurants});\r\n\r\n  let resturantsHTML = '';\r\n  restaurants.forEach(restaurant => {\r\n    resturantsHTML = resturantsHTML + generateRestaurantHTML(restaurant);\r\n  });\r\n  postMessage({'id': 2, 'resturantsHTML': resturantsHTML});\r\n}\r\n\r\n\r\nvar generateRestaurantHTML = (restaurant) => {\r\n  \r\n  \r\n  let imgsList = DBHelper.imagesUrlForRestaurant(restaurant);\r\n\r\n  let picture = '<picture class=\"js-lazy-image\">';\r\n  // picture.className = 'js-lazy-image';\r\n  // picture.display = 'none';\r\n  let img1 = `<source media=\"(min-width: 1500px)\" class=\"restaurant-img\" srcset=\"${imgsList[1]}\">`;\r\n  let img2 = `<source media=\"(min-width: 800px)\" class=\"restaurant-img\" srcset=\"${imgsList[2]}\">`;\r\n  // img1.media = '(min-width: 1500px)';\r\n  // img1.className = 'restaurant-img';\r\n  // img1.srcset = imgsList[1];\r\n\r\n  // picture.append(img1);\r\n  \r\n\r\n  // const img2 = document.createElement('source');\r\n  // img2.media = '(min-width: 800px)';\r\n  // img2.className = 'restaurant-img';\r\n  // img2.srcset = imgsList[2];\r\n  // picture.append(img2);\r\n  let alt = restaurant.name + ' restaurant , provide ' + restaurant.cuisine_type + ', Located in ' + restaurant.address;\r\n  let img = `<img alt=\"${alt}\" data-src=\"${imgsList[3]}\" class=\"restaurant-img\" >`;\r\n  \r\n  // img.setAttribute('data-src', imgsList[3]);\r\n  // img.className = 'restaurant-img';\r\n  picture = picture + img1 + img2 + img + '</picture>';\r\n  \r\n\r\n  const name = `<h2>${restaurant.name}</h2>`;\r\n  // name.innerHTML = restaurant.name;\r\n  // li.append(name);\r\n\r\n  let neighborhood = `<p>${restaurant.neighborhood}</p>`;\r\n  // neighborhood.innerHTML = restaurant.neighborhood;\r\n  // li.append(neighborhood);\r\n\r\n  const address = `<p>${restaurant.address}</p>`;\r\n  // address.innerHTML = restaurant.address;\r\n  // li.append(address);\r\n\r\n  const more = `<a role=\"button\" href=\"${DBHelper.urlForRestaurant(restaurant)}\">View Details</a>`;\r\n  // more.innerHTML = 'View Details';\r\n  // more.role = 'button';\r\n  // more.href = DBHelper.urlForRestaurant(restaurant);\r\n  // li.append(more)\r\n\r\n  let li = '<div>' + picture + name +neighborhood + address + more + '</div>';\r\n  \r\n  return li;\r\n}"]}